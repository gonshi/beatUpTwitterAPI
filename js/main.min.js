$(function(){var a=$("<img>").addClass("exclamation").attr({src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/img/exclamation.png"});a.appendTo(".ProfileCanopy-avatar");var b=$("<audio>").attr({id:"stamp",src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/audio/stamp.mp3",preload:"auto",volume:"0.2"});b.appendTo("body"),b=document.getElementById("stamp"),$("body").css({cursor:"none"});var c=!1,d=!0,e=!1,f=0,g=$("<audio>").attr({id:"final",src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/audio/final.mp3",preload:"auto"}),h=$("<audio>").attr({id:"jab",src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/audio/jab.mp3",preload:"auto"}),i=$("<audio>").attr({id:"second",src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/audio/second.mp3",preload:"auto"}),j=$("<audio>").attr({id:"swing",src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/audio/swing.mp3",preload:"auto"}),k=$("<audio>").attr({id:"striking",src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/audio/striking.mp3",preload:"auto"}),l=$("<audio>").attr({id:"third",src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/audio/third.mp3",preload:"auto"});g.appendTo("body"),h.appendTo("body"),i.appendTo("body"),j.appendTo("body"),k.appendTo("body"),l.appendTo("body"),g=document.getElementById("final"),j=document.getElementById("swing"),h=document.getElementById("jab"),i=document.getElementById("second"),l=document.getElementById("third"),k=document.getElementById("striking");for(var m=1;6>m;m++){var n=$("<img>").addClass("crack"+m).attr({src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/img/level"+m+".png"});n.appendTo(".ProfileCanopy-avatar")}var o=$("<div/>").addClass("flash");o.appendTo(".ProfileCanopy-avatar");var p=$("<img>").addClass("gameover").attr({src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/img/bg.png"}).css({top:-$(window).height()});p.appendTo("body");var q={tweet:[],word:[],img_url:[]};$(".topbar").css({"z-index":-1});var r=$("<p/>").addClass("extension_tweet");r.css({"margin-left":80}),r.appendTo(".ProfileCanopy-avatar");var s=$("<div/>").addClass("pointer"),t=$("<img>").attr({src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/img/hammer2.png"});s.append(t),s.appendTo("#doc"),s.click(function(a){$(this).animate({transform:"translate(-470px, -220px) rotate(10deg)"},50,"easeOutBounce").delay(20).animate({transform:"translate(-470px, -220px) rotate(60deg)"},100),j.play(),setTimeout(function(){var b=a.pageX-$("img.ProfileAvatar-image").offset().left,d=a.pageY-$("img.ProfileAvatar-image").offset().top;if(e&&!c&&b>300&&600>b&&d>-60&&300>d){switch(f){case 0:h.play();break;case 1:h.play();break;case 2:i.play();break;case 3:l.play();break;case 4:l.play();break;case 5:g.play()}if(c=!0,f++,1!=f&&6!=f&&$("img.crack"+(f-1)).css({display:"none"}),6==f)$(".flash").css({top:$("img.ProfileAvatar-image").position().top-15,left:$("img.ProfileAvatar-image").position().left-191}),$(".flash").flash({src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/img/crack.swf",width:667,height:1e3,wmode:"transparent"},null,function(a){$(this).prepend($.fn.flash.transform(a)),$("img.ProfileAvatar-image, img.crack5").clearQueue(),$("img.ProfileAvatar-image, img.crack5").stop(),$("img.ProfileAvatar-image, img.crack5").animate({opacity:0},1e3)}),setTimeout(function(){$("img.gameover").animate({top:0},1500,"easeOutBounce"),k.play()},2e3);else{$(".crack"+f).css({left:$("img.ProfileAvatar-image").position().left+50,top:$("img.ProfileAvatar-image").position().top+50,opacity:1}),$("img.ProfileAvatar-image, .extension_tweet, img.crack"+f).clearQueue(),$("img.ProfileAvatar-image, .extension_tweet, img.crack"+f).stop();var j=Math.floor(Math.random()*q.tweet[f].length);$(".extension_tweet").html(q.tweet[f][j]),$(".extension_tweet").css({"margin-top":-($(".extension_tweet").height()+20)});var m=0;$(".extension_tweet").offset().top-$(".extension_tweet").height()/2-20<0&&(m=-1*($(".extension_tweet").offset().top-$(".extension_tweet").height()/2-20)+50);var n=!1;$(".extension_tweet").offset().left+$(".extension_tweet").width()/2>$(window).width()&&(n=!0),m+=50,n?($(".extension_tweet").animate({left:$(window).width()-$(".ProfileCanopy-avatar").offset().left-670,top:$("img.ProfileAvatar-image").position().top+m-30,transform:"scale(1)"},500*(f+1),"easeOutElastic"),$("img.ProfileAvatar-image, img.crack"+f).animate({left:$(window).width()-$(".ProfileCanopy-avatar").offset().left-700,top:$("img.ProfileAvatar-image").position().top+m},500*f,"easeOutElastic")):($(".extension_tweet").animate({left:$("img.ProfileAvatar-image").position().left-70,top:$("img.ProfileAvatar-image").position().top+m-30,transform:"scale(1)"},200*(f+1),"easeOutElastic"),$("img.ProfileAvatar-image, img.crack"+f).animate({left:$("img.ProfileAvatar-image").position().left-100,top:$("img.ProfileAvatar-image").position().top+m},500*f,"easeOutElastic")),setTimeout(function(){$(".extension_tweet").animate({transform:"scale(0)"},100*(f+1),"easeOutSine",function(){c=!1,u()})},3e3)}}},50)}),$(document).on("mousemove",function(a){d?(d=!1,setTimeout(function(){$("img.exclamation").animate({transform:"scale(1) rotate(-10deg)"},150,"easeOutElastic").delay(1e3).animate({transform:"scale(0) rotate(-10deg)"},150,"easeOutElastic",function(){$("img.ProfileAvatar-image").attr({src:"chrome-extension://ckoiooeippmkidpcbahhabakeffpjfbo/img/twitter.gif"}),setTimeout(function(){$("img.ProfileAvatar-image").animate({transform:"scale(1.5)"},500,function(){u(),e=!0})},500)})},500),s.css({top:a.pageY,left:a.pageX,display:"block"}).animate({transform:"translate(-470px, -220px) rotate(60deg)"}),b.play()):s.css({top:a.pageY,left:a.pageX,display:"block"})});var u=function(){if(!c){var a=Math.random()*($(window).width()-167)-$(".ProfileCanopy-avatar").offset().left,b=Math.random()*($(window).height()-167)-$(".ProfileCanopy-avatar").offset().top;$("img.ProfileAvatar-image, img.crack"+f+", .extension_tweet").animate({top:b,left:a},500*(f+1),"easeInOutSine"),setTimeout(function(){u()},500)}},v={ajax:function(){$.ajax({type:"GET",url:"http://lab.gonshi.net/twitter/list",data:{format:"json"},dataType:"json",success:$.proxy(this._success,this)})},_success:function(a){var b,c,d=0;for(b=1;6>b;b++)for(q.tweet[b]=new Array,q.img_url[b]=new Array,c=0;a.type[d]==b;)q.tweet[b][c]=['<img src="'+a.img_url[d]+'" class="icon"/>','<span class = "username">',"@"+a.username[d],"</span>",'<p class="text">',a.tweet[d],"</p>"].join(""),d++,c++}};v.ajax()});